!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=e,n.c=t,n.p="",n(0)}([function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=c(n(8)),o=c(n(9)),u=c(n(13)),s=c(n(16));function c(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),window.NUMBERS_ASYNC||this.load()}return i(e,[{key:"load",value:function(e){if(null!=e&&!Array.isArray(e))throw new TypeError('Value of argument "querySelector" violates contract.\n\nExpected:\n?Array\n\nGot:\n'+function e(t,n){void 0===n&&(n=0);n+=1;if(null===t)return"null";if(void 0===t)return"void";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return void 0===t?"undefined":r(t);if(Array.isArray(t)){if(t.length>0){if(n>4)return"[...]";var i=e(t[0],n);return t.every(function(t){return e(t,n)===i})?i.trim()+"[]":"["+t.slice(0,15).map(function(t){return e(t,n)}).join(", ")+(t.length>=15?", ...":"")+"]"}return"Array"}var a=Object.keys(t);if(!a.length)return t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"Object";if(n>4)return"{...}";var o="  ".repeat(n-1),u=a.slice(0,15).map(function(r){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(r)?r:JSON.stringify(r))+": "+e(t[r],n)+";"}).join("\n  "+o);return a.length>=15&&(u+="\n  "+o+"..."),t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name+" {\n  "+o+u+"\n"+o+"}":"{\n  "+o+u+"\n"+o+"}"}(e));this.session=new a.default,this.collectPlaceholders=new o.default(e),this.bannerCommandsListener=new s.default,this.remoteBannersCollection=new u.default({sessionId:this.session.id,placeholders:this.collectPlaceholders.placeholders})}}]),e}();window.NUMBERS=new l},,,,,,,,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="",r=0;r<e;r+=1)n+=t.charAt(Math.floor(Math.random()*t.length));return n}(26)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(10),o=(r=a)&&r.__esModule?r:{default:r};var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.placeholders={},this.collect(t)}return i(e,[{key:"collect",value:function(e){var t=document.querySelectorAll(".numbers-promo-placeholder");e&&(t=document.querySelectorAll(e));for(var n=0;n<t.length;n+=1){var r=t[n],i=new o.default(r),a=r.getAttribute("data-numbers-type");this.placeholders[a]?this.placeholders[a+n]=i:this.placeholders[a]=i}}},{key:"init",value:function(){this.collect()}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(11),o=(r=a)&&r.__esModule?r:{default:r};var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=t,this.banner=null,this.init()}return i(e,[{key:"getConfig",value:function(){this.subpageId=this.el.getAttribute("data-numbers-subpage"),this.itemId=this.el.getAttribute("data-item-id"),this.placeType=this.el.getAttribute("data-numbers-type"),this.isBrandingPlace="branding"===this.placeType}},{key:"brandingWidthIsValid",value:function(){return this.el.offsetWidth>150}},{key:"setBannerData",value:function(e){this.bannerData=e,this.isBrandingPlace?this.brandingWidthIsValid()&&this.initBanner():this.initBanner()}},{key:"initBanner",value:function(){this.banner=new o.default(this.el,this.bannerData)}},{key:"init",value:function(){this.getConfig()}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(12),o=(r=a)&&r.__esModule?r:{default:r};var u=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.placeholderEl=t,this.bannerData=n,this.init()}return i(e,[{key:"validate",value:function(){var e=!0;return""===this.bannerData.type&&(e=!1),""===this.bannerData.html&&(e=!1),e}},{key:"injectScripts",value:function(){for(var e=this.placeholderEl.querySelectorAll("script"),t=0;t<e.length;t+=1){var n=e[t];try{eval.apply(window,[n.innerHTML])}catch(e){console.error('Numbers banner throwed: "'+e+'"')}}}},{key:"incrementViews",value:function(){var e=this.placeholderEl.firstElementChild.getAttribute("data-pbv"),t=this.placeholderEl.firstElementChild.getAttribute("data-external"),n=this.placeholderEl.getAttribute("data-numbers-type");function r(){var n=new Image;""!==e&&(n.src=e,""!==t&&((new Image).src=t))}"branding"===n||"rich"===n?r():(0,o.default)(this.placeholderEl,r),this.bannerData instanceof Array&&this.bannerData.length>1&&this.bannerData.splice(0,1)}},{key:"renderBranding",value:function(){var e=this.placeholderEl,t=this.bannerData instanceof Array?this.bannerData[0].html:this.bannerData.html,n=e.querySelector(".numbers-promo-placeholder--left"),r=e.querySelector(".numbers-promo-placeholder--right");!(!n||!r)?(n.innerHTML=t[0],r.innerHTML=t[1],n.setAttribute("data-pbv",this.placeholderEl.firstElementChild.firstElementChild.getAttribute("data-pbv")),n.setAttribute("data-external",this.placeholderEl.firstElementChild.firstElementChild.getAttribute("data-external"))):e.innerHTML=t.join("")}},{key:"renderBanner",value:function(){this.placeholderEl.innerHTML=this.bannerData instanceof Array?this.bannerData[0].html:this.bannerData.html}},{key:"render",value:function(){switch(this.placeholderEl.getAttribute("data-numbers-type")){case"branding":this.renderBranding();break;default:this.renderBanner()}}},{key:"init",value:function(){this.validate()&&(this.render(),this.injectScripts(),this.incrementViews())}}]),e}();t.default=u},function(e,t){(function(t){e.exports=function(e,o,u){var s={container:t.document.body,offset:0,debounce:15,failsafe:150};void 0!==o&&"function"!=typeof o||(u=o,o={});var c=s.container=o.container||s.container,l=s.offset=o.offset||s.offset,f=s.debounce=o.debounce||s.debounce,d=s.failsafe=o.failsafe||s.failsafe;!0===d?d=150:!1===d&&(d=0);d>0&&d<f&&(d=f+50);for(var h=0;h<n.length;h++)if(n[h].container===c&&n[h]._debounce===f&&n[h]._failsafe===d)return n[h].isInViewport(e,l,u);return n[n.push(function(e,n,o){var u=function(){var e=[];function t(t){for(var n=e.length-1;n>=0;n--)if(e[n][0]===t)return n;return-1}function n(e){return-1!==t(e)}return{add:function(t,r,i){n(t)||e.push([t,r,i])},remove:function(n){var r=t(n);-1!==r&&e.splice(r,1)},isWatched:n,checkAll:function(t){return function(){for(var n=e.length-1;n>=0;n--)t.apply(this,e[n])}}}}(),s=e===t.document.body?t:e,c=(l=u.checkAll(function(e,t,n){p(e,t)&&(u.remove(e),n(e))}),f=n,function(){var e=this,t=arguments,n=d&&!h;clearTimeout(h),h=setTimeout(function(){h=null,d||l.apply(e,t)},f),n&&l.apply(e,t)});var l,f,d,h;i(s,"scroll",c),s===t&&i(t,"resize",c);r&&function(e,t,n){var r=new MutationObserver(function(e){!0===e.some(o)&&setTimeout(n,0)}),i=Array.prototype.filter,a=Array.prototype.concat;function o(t){var n=a.call([],Array.prototype.slice.call(t.addedNodes),t.target);return i.call(n,e.isWatched).length>0}r.observe(t,{childList:!0,subtree:!0,attributes:!0})}(u,e,c);o>0&&setInterval(c,o);function p(n,r){if(!n)return!1;if(!a(t.document.documentElement,n)||!a(t.document.documentElement,e))return!1;if(!n.offsetWidth||!n.offsetHeight)return!1;var i=n.getBoundingClientRect(),o={};if(e===t.document.body)o={top:-r,left:-r,right:t.document.documentElement.clientWidth+r,bottom:t.document.documentElement.clientHeight+r};else{var u=e.getBoundingClientRect();o={top:u.top-r,left:u.left-r,right:u.right+r,bottom:u.bottom+r}}var s=i.right>=o.left&&i.left<=o.right&&i.bottom>=o.top&&i.top<=o.bottom;return s}return{container:e,isInViewport:function(e,t,n){if(!n)return p(e,t);var r=function(e,t,n){return{watch:function(){u.add(e,t,n)},dispose:function(){u.remove(e)}}}(e,t,n);return r.watch(),r},_debounce:n,_failsafe:o}}(c,f,d))-1].isInViewport(e,l,u)};var n=[],r="function"==typeof t.MutationObserver;function i(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n,!1)}var a=function(){return!t.document||(t.document.documentElement.compareDocumentPosition?function(e,t){return!!(16&e.compareDocumentPosition(t))}:t.document.documentElement.contains?function(e,t){return e!==t&&!!e.contains&&e.contains(t)}:function(e,t){for(;t=t.parentNode;)if(t===e)return!0;return!1})}}).call(t,function(){return this}())},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=o(n(14)),a=o(n(15));function o(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t.sessionId,r=t.placeholders;this.isPreview=!1,this.isQuery=!1,this.subpageId="",this.sessionId=n,this.placeholders=r,this.placeholdersKeys=Object.keys(this.placeholders),this.init()}return r(e,[{key:"formatQueryData",value:function(){var e=this,t="s_id="+this.sessionId;return this.placeholdersKeys.forEach(function(n,r){var i=e.placeholders[n];i.itemId&&(e.isPreview=!0,t+="&item_id="+i.itemId),0==r&&(e.isQuery=!0,e.subpageId=i.subpageId,t+="&subpage_id="+i.subpageId),"block"==window.getComputedStyle(document.querySelector("."+i.el.className)).display&&(e.isQuery=!0,t+="&placement_type="+i.placeType)}),t}},{key:"handleResponse",value:function(e){var t=this;this.placeholdersKeys.forEach(function(n){var r=t.placeholders[n];void 0!==e[r.placeType]&&r.setBannerData(e[r.placeType])})}},{key:"init",value:function(){var e=this,t=this.formatQueryData(),n=this.isPreview?"https://numbers.md/preview_output":"https://numbers.md/multi_output";(n+="?"+t,this.isQuery&&new i.default({url:n,success:function(t){e.handleResponse(t),e.survey=new a.default(t.sp)}}),this.subpageId)&&(n="https://numbers.md/track/"+this.subpageId,(new Image).src=n)}}]),e}();t.default=u},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=void 0,r=function(e){var t={url:"",json:!0,success:function(){}};function r(e){var t=this;this.xhr=new XMLHttpRequest,this.xhr.open("GET",e.url,!0),this.xhr.withCredentials=!0,this.xhr.onreadystatechange=function(){try{if(4===t.xhr.readyState&&200===t.xhr.status){var n=t.xhr.responseText;e.success(JSON.parse(n))}}catch(e){}},this.xhr.send(null)}function i(t){var n=this;this.head=document.getElementsByTagName("head")[0],this.callbackName=this.getCallbackName(),this.script=document.createElement("script"),this.script.src=t.url+"&callback="+this.callbackName,this.head.appendChild(this.script),e[this.callbackName]=function(e){t.success(e),n.abort()}}return r.prototype.abort=function(){n.xhr.abort()},i.prototype.getRandomInt=function(){return function(e,t){return Math.floor(Math.random()*(t-e+1))+e}},i.prototype.getCallbackName=function(){var e="jsonpCallback";return e+=""+(new Date).getTime(),e+=""+n.getRandomInt(1e5,999999)},i.prototype.abort=function(){n.head.removeChild(n.script),e[n.callbackName]=void 0},function(n){var a=n.url,o=n.success;this.options=Object.create(t),this.options.url=a,this.options.success=o,"XMLHttpRequest"in e&&"withCredentials"in new XMLHttpRequest?this.request=new r(n):this.request=new i(n)}}(window);t.default=r},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=function(){function e(t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&this.bind(),"enabled"}return n(e,[{key:"openWindow",value:function(){var e=screen.height/2-this.height/2,t=screen.width/2-this.width/2;window.open("//numbers.md/region","Numbers","width=650,height=1050,\n      location=no,resizable=no,scrollbars=no,\n      status=no,top="+e+",left="+t)}},{key:"bind",value:function(){var e=function e(){this.openWindow(),document.removeEventListener("click",e,!1)}.bind(this);document.addEventListener("click",e,!1)}}]),e}();t.default=r},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=/^https?:\/\/i.simpalsmedia.com/,i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bind()}return n(e,[{key:"closeBanner",value:function(e,t){var n=document.querySelector("#numbers-banner--"+e+"--"+t);try{n.remove()}catch(e){}return this}},{key:"closeAllBanners",value:function(e){this.closeBanner(e,1).closeBanner(e,2)}},{key:"showBanner",value:function(e,t){var n=document.querySelector("#numbers-banner--"+e+"--"+t);try{n.style.display="block"}catch(e){}return this}},{key:"sendBannerEvent",value:function(e,t,n,r){(new Image).src=t+"?type="+r}},{key:"commandRouter",value:function(e,t,n){var r=n.getAttribute("data-banner-id"),i=n.getAttribute("data-banner-link"),a=n.getAttribute("data-event-url");switch(e){case"closeBanner":this.closeBanner(r,t.bannerIndex);break;case"closeAllBanners":this.closeAllBanners(r);break;case"sendBannerEvent":this.sendBannerEvent(r,a,i,t.eventType);break;case"showBanner":this.showBanner(r,t.bannerIndex);break;case"goToSite":i&&window.open(i)}}},{key:"findSourceIframe",value:function(e){for(var t,n=document.getElementsByTagName("iframe"),r=0,i=n.length;r<i;r++)n[r].contentWindow===e&&(t=n[r]);return t}},{key:"onMessage",value:function(e){var t=JSON.parse(e.data),n=t.command,r=t.data,i=this.findSourceIframe(e.source);this.commandRouter(n,r,i)}},{key:"bind",value:function(){var e=this;window.addEventListener("message",function(t){r.test(t.origin)&&e.onMessage(t)},!1)}}]),e}();t.default=i}]);